# 计算过程

在开始学习的时候，要明确一点：**在试图理解一个复杂系统的时候不要过度纠结与细节，因为要避免不必要的注意、计算和思考。这也就是为什么抽象这么重要！**

> The key to understanding complicated things is to know what not to look at and what not to compute and what not to think.

> if you have the name of a spirit, you have power over it.
在学习的时候一定要记住一些名词，因为之后知道了这些名词，你才知道如何去表达。

## 一个例子

皮亚诺算法定义的加法：
~~~scheme
(define (+ x y)
    (if (= x 0)
        y
        (+ (-1+ x) (1+ y))))
~~~
这又是一个递归，此消彼长，直至一个为零，这样就完成了加法过程。

其中'-1+'和'1+'都是更基本过程。

## Text Section

在学习计算机的时候要培养一种直觉：程序是如何演变为计算过程的。

对比两种加法：
~~~scheme
(define (+ x y)
    (if (= x 0)
        y
        (+ (-1+ x) (1+ y))))

(define (+ x y)
    (if (= x 0)
        y
        (1+ (+ (-1+ x) y))))
~~~
这两种方式都是利用了此消彼长的原理。对一个减一另一个加1，但是区别在于减一和加一的时机不同。

为了看到这样的区别会带来什么结果：我们来看这两个程序的不同计算过程.以3+5为例

~~~scheme
1. 
(+ 3 5) =>
(+ 2 6) => 
(+ 1 7) => 
(+ 0 8) => 
8

2. 
(+ 3 5) => 
(1+ (+ 2 5)) => 
(1+ (1+ (+ 1 5))) => 
(1+ (1+ (1+ (+ 0 5)))) => 
(1+ (1+ (1+ 5))) => 
(1+ (1+ 6)) => 
(1+ 7) => 
8
~~~
这两个过程有非常明显的不同的计算过程，这两种计算过程的形状十分的不同。要培养的就是对不同计算过程“形状”的感觉，就像一个 **“魔法师”** 一样。

那么这两个计算过程的形状不同说明了什么呢？

方法一: 可以看到计算的次数与计算中参数x一致，即time = O(x)。时间复杂度为O(x)。同时也看到不论计算到哪一步，计算机需要保存的只有那几个元素，且与x无关。即空间复杂度度space = O(1)

方法二：可以看到计算的次数是x的一次函数，所以时间复杂度为time = O(x)。但是空间复杂度则不同。因为在这里在一开始x>0时每一次计算都要保存多一点，因为要加的1此刻还没有加上。所以空间复杂度space = O(x)。

这两种过程分别有一个相对应的名称:迭代(Iterative)，递归(recursive)。在这里更缺的说分别是：线性迭代和线性递归过程。但是更有趣的是这两种计算过程都是用递归定义的。

## 局部名

在我们熟知的语言中，经常会看到一些局部变量和局部函数。

在Lisp中也有这种结构。
如在sqrt中定义的那些函数都是局部函数。

局部函数的作用就是在完成一个大项目的时候可能会有需求一致的函数，但是过程不相同。这样就会带来困扰：不知道怎么命名才方便使用。所以局部函数就会解决这个问题，在写代码的时候把一些只有当前函数用得到的函数写在内部，就不会影响项目本身。